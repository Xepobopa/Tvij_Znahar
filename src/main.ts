import { dataSource } from "./database/data-source";
import { bot } from "./bot";
import { config } from "dotenv";
import { ProductEntity } from "./database/entity/product.entity";
config();

async function bootstrap() {
    dataSource.initialize()
        .then(() => {
            dataSource.getRepository(ProductEntity)
            .createQueryBuilder()
            .insert()
            .values({ 
                name: '–õ–∏—Å–∏—á–∫–∞ üü†', 
                description: "–õ–∏—Å–∏—á–∫–∞ üü† ‚Äì –ø—Ä–∏—Ä–æ–¥–Ω–∏–π –∑–∞—Ö–∏—Å–Ω–∏–∫ –≤–∞—à–æ–≥–æ –æ—Ä–≥–∞–Ω—ñ–∑–º—É\n\n–õ–∏—Å–∏—á–∫–∞ ‚Äì —Ü–µ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –≥—Ä–∏–±, —è–∫–∏–π –Ω–µ —Ç—ñ–ª—å–∫–∏ —î –¥–∂–µ—Ä–µ–ª–æ–º —Ü—ñ–Ω–Ω–∏—Ö –≤—ñ—Ç–∞–º—ñ–Ω—ñ–≤ —ñ –º—ñ–∫—Ä–æ–µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –∞ –π –≤–æ–ª–æ–¥—ñ—î —Å–∏–ª—å–Ω–∏–º–∏ –ø—Ä–æ—Ç–∏–ø–∞—Ä–∞–∑–∏—Ç–∞—Ä–Ω–∏–º–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏. –á—ó –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–ø—Ä–∏—è—é—Ç—å –∑–º—ñ—Ü–Ω–µ–Ω–Ω—é —ñ–º—É–Ω—ñ—Ç–µ—Ç—É, –æ—á–∏—â–µ–Ω–Ω—é –æ—Ä–≥–∞–Ω—ñ–∑–º—É –≤—ñ–¥ —à–∫—ñ–¥–Ω–∏–∫—ñ–≤ —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—é —Ä–æ–±–æ—Ç–∏ –æ—Ä–≥–∞–Ω—ñ–≤ —Ç—Ä–∞–≤–ª–µ–Ω–Ω—è.\n\n<b>–û—Å–Ω–æ–≤–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:</b>\n- <b>–ü—Ä–æ—Ç–∏–ø–∞—Ä–∞–∑–∏—Ç–∞—Ä–Ω–∏–π –µ—Ñ–µ–∫—Ç</b>: –õ–∏—Å–∏—á–∫–∞ –º—ñ—Å—Ç–∏—Ç—å –ø—Ä–∏—Ä–æ–¥–Ω—ñ —Ä–µ—á–æ–≤–∏–Ω–∏, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –±–æ—Ä–æ—Ç–∏—Å—è –∑ –ø–∞—Ä–∞–∑–∏—Ç–∞–º–∏.\n- <b>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–µ—á—ñ–Ω–∫–∏ —Ç–∞ —à–ª—É–Ω–∫–æ–≤–æ-–∫–∏—à–∫–æ–≤–æ–≥–æ —Ç—Ä–∞–∫—Ç—É</b>: –ü–æ–∫—Ä–∞—â—É—î —Ç—Ä–∞–≤–ª–µ–Ω–Ω—è —ñ —Å–ø—Ä–∏—è—î –≤–∏–≤–µ–¥–µ–Ω–Ω—é —Ç–æ–∫—Å–∏–Ω—ñ–≤.\n- <b>–î–∂–µ—Ä–µ–ª–æ –≤—ñ—Ç–∞–º—ñ–Ω—ñ–≤ —ñ –º—ñ–∫—Ä–æ–µ–ª–µ–º–µ–Ω—Ç—ñ–≤</b>: –ù–∞—Å–∏—á—É—î –æ—Ä–≥–∞–Ω—ñ–∑–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ —Ä–µ—á–æ–≤–∏–Ω–∞–º–∏ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤'—è.\n- <b>–ó–º—ñ—Ü–Ω–µ–Ω–Ω—è —ñ–º—É–Ω—ñ—Ç–µ—Ç—É</b>: –°–ø—Ä–∏—è—î –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—é –æ–ø—ñ—Ä–Ω–æ—Å—Ç—ñ –æ—Ä–≥–∞–Ω—ñ–∑–º—É –¥–æ —ñ–Ω—Ñ–µ–∫—Ü—ñ–π —Ç–∞ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å.\n\n<b>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:</b>\n–ü—Ä–∏–π–º–∞—Ç–∏ –ø–æ 1-2 –∫–∞–ø—Å—É–ª–∏ –∞–±–æ —è–∫ —Ö–∞—Ä—á–æ–≤—É –¥–æ–±–∞–≤–∫—É –¥–æ —Ä–∞—Ü—ñ–æ–Ω—É. –î–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ –ª—ñ–∫–∞—Ä–µ–º –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.\n\n<b>–°–∫–ª–∞–¥:</b>\n100% –µ–∫—Å—Ç—Ä–∞–∫—Ç –≥—Ä–∏–±–∞ –ª–∏—Å–∏—á–∫–∏, –±–µ–∑ –¥–æ–º—ñ—à–æ–∫ —Ç–∞ —Ö—ñ–º—ñ—á–Ω–∏—Ö –¥–æ–±–∞–≤–æ–∫.", 
                price: 150,
                image: 'https://food375.by/upload/iblock/da7/si6ols9mml2k9764tm6ro4ye7gobcphm.jpg' 
            })
            .execute();

            console.log("Data Source has been initialized!")
        })
        .catch((err) => {
            console.error("Error during Data Source initialization: ", err)
        })

    bot.catch((err) => {
        console.error(err)
    });
    bot.start();

    console.log('Strated bot...');
}

bootstrap();